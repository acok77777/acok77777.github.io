<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì œë¬¼í¬ê¶Œ ì˜ë¬´ê¶í™” ì±Œë¦°ì§€</title>

<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon-192.png" sizes="192x192">
<link rel="icon" href="icon-512.png" sizes="512x512">
<link rel="apple-touch-icon" href="icon-192.png">
<meta name="theme-color" content="#1976d2">

<link href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap" rel="stylesheet">

<style>
body{
  font-family:"ë§‘ì€ ê³ ë”•", sans-serif;
  text-align:center;
  margin:0;
  padding:10px;
  background:#e3f2fd;
  background-image:
    radial-gradient(circle at 10px 10px,#fff 2px,transparent 3px),
    radial-gradient(circle at 30px 30px,#fff 2px,transparent 3px);
  background-size:40px 40px;
}

/* ì œëª© */
.title-wrap{position:relative;display:inline-block;padding-top:22px;}
.top-center{position:absolute;top:0;left:40px;font-family:'Poor Story';font-size:16px;font-weight:bold;}
.main-title{font-family:'Poor Story';font-size:26px;font-weight:bold;margin-bottom:8px;}

/* ê¸°ê°„ */
.sub-title{font-family:'Poor Story';font-size:20px;font-weight:bold;}
.period-title{color:#2e7d32;}
.date-strong{color:#1976d2;font-weight:bold;text-decoration:underline;}

/* ì´ë¦„ */
.name-box{margin:18px 0;display:flex;justify-content:center;}
.name-wrap{display:flex;align-items:center;background:#fff;border:2px solid #ffd27d;border-radius:14px;padding:6px 12px;}
.flower{font-size:18px;margin-right:6px;}
.name-input{border:none;outline:none;font-size:15px;width:145px;text-align:center;}

/* ì•ˆë‚´ */
.guide{font-size:13px;}

/* ë¹™ê³ íŒ */
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:1px;
  background:#fff;
  width:90vw;
  max-width:420px;
  margin:15px auto;
  aspect-ratio:1/1;
  border-radius:18px;
  overflow:hidden;
}
.cell{
  position:relative;
  background:#f8bbd0;
  cursor:pointer;
  font-size:12px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.text-box{position:absolute;top:12%;width:90%;}
.title{font-weight:800;margin-bottom:6px;}

.cell.open{
  color:transparent;
  background-image:url("flower2.jpg");
  background-size:400% 400%;
  background-repeat:no-repeat;
}

/* ê½ƒê°€ë£¨ */
.petal{
  position:absolute;width:8px;height:8px;
  background:radial-gradient(circle,#ff5f8f,#ffc1d9);
  border-radius:50% 50% 50% 0;
  transform:rotate(45deg);
  pointer-events:none;
  animation:float 1s ease-out forwards;
}
@keyframes float{
  0%{transform:scale(0.4);opacity:1;}
  100%{transform:translate(var(--x),var(--y)) scale(1.2);opacity:0;}
}

/* í•˜ë‹¨ */
.notice{font-size:15px;margin-top:10px;}
.notice-date{color:#1976d2;font-weight:bold;text-decoration:underline;}
.notice-strong{font-weight:bold;}
</style>
</head>

<body>

<div class="title-wrap">
  <div class="top-center">&lt;ì œë¬¼í¬ê¶Œ&gt;</div>
  <div class="main-title">ğŸŒ¸ (ì˜)ë¬´ê¶í™”ê½ƒì´ í”¼ì—ˆìŠµë‹ˆë‹¤ ğŸŒ¸</div>
</div>

<div class="sub-title">
  <span class="period-title">ë¹™ê³ íŒ ì™„ì„±ê¸°ê°„ :</span>
  <span class="date-strong">1/26(ì›”) ~ 2/25(ìˆ˜)</span>
</div>

<div class="name-box">
  <div class="name-wrap">
    <div class="flower">ğŸŒ·</div>
    <input class="name-input" id="username" placeholder="ì´ë¦„ ì…ë ¥">
  </div>
</div>

<p class="guide">ì¹¸ì„ ëˆŒëŸ¬ ë„ì „ê³¼ì œë¥¼ ì™„ë£Œí•´ ë³´ì„¸ìš” ğŸŒ¸</p>

<div class="grid" id="grid"></div>

<div class="notice">
  ë¹™ê³  3ì¤„ ì™„ì„± ì‹œ ì†Œì •ì˜ ìƒí’ˆì„ ë“œë¦½ë‹ˆë‹¤<br>
  <span class="notice-date">2ì›” 25ì¼ 12ì‹œ</span>
  <span class="notice-strong">ì°½ì¶˜êµë¥˜íšŒ</span> ë•Œ ë³´ì—¬ì£¼ì„¸ìš”
</div>

<script>
const missions = [
 ["ìŠ¤ë§ˆì¼ DAY","ê°€ì¡±ì—ê²Œ","3ê°€ì§€ ì¹­ì°¬í•˜ê¸°"],
 ["ì°½ì œ DAY","í‰ì†Œ","ì°½ì œì‹œê°„ì—<br>+10ë¶„"],
 ["ì˜¤.ìš´.ì™„.","ì˜¤ëŠ˜ ìš´ë™ ì™„ë£Œ","(ì‚°ì±… OK)"],
 ["ë•¡ìŠ¤ íˆ¬ â™¡","ì˜¤ëŠ˜ ê°ì‚¬í•œ ì¼","3ê°€ì§€"],
 ["SDG's DAY","ì¼íšŒìš©í’ˆ","ì‚¬ìš©ê¸ˆì§€"],
 ["'ë‚˜'ë¥¼ ìœ„í•œ DAY","ë‚˜ ìì‹ ","ì¹­ì°¬"],
 ["ìš°í˜¸ DAY","ì¹¸ë‚˜í™œë™","ì‹¤ì²œ"],
 ["ì¢Œë‹´íšŒ DAY","ê°€ì¡±ê³¼","ì¢Œë‹´íšŒ"],
 ["ìš°í˜¸ DAY","ì˜ë¬´ê¶í™”","ìŠ¤í”¼ì¹˜"],
 ["ìŠ¹ë¦¬ DAY","ì‹ .í–‰.í•™","ìŠ¹ë¦¬"],
 ["í—ˆê·¸ DAY","ê°€ì¡±","ì•ˆì•„ì£¼ê¸°"],
 ["'ë‚˜' DAY","ì¸ìŠ¤í„´íŠ¸","ì•ˆë¨¹ê¸°"],
 ["ë„ì „ DAY","í•˜ê¸° ì‹«ì€ ì¼","ë„ì „"],
 ["í•´ë°© DAY","ì”ì†Œë¦¬","ê¸ˆì§€"],
 ["ì˜ë¬´ê¶í™” DAY","ì„ ë°°ì™€","í™œë™"],
 ["ì‚¬ì œ DAY","ì‹ ì¸ê°„í˜ëª…","ì½ê¸°"]
];

const grid = document.getElementById("grid");
const saved = JSON.parse(localStorage.getItem("openCells") || "[]");

missions.forEach((m,i)=>{
  const cell=document.createElement("div");
  cell.className="cell";
  cell.innerHTML=`<div class="text-box">
    <div class="title">${m[0]}</div>
    <div>${m[1]}</div>
    <div>${m[2]}</div>
  </div>`;

  const r=Math.floor(i/4), c=i%4;

  if(saved.includes(i)){
    cell.classList.add("open");
    cell.style.backgroundPosition=`${c*33.33}% ${r*33.33}%`;
  }

  cell.onclick=()=>{
    cell.classList.toggle("open");
    let now = JSON.parse(localStorage.getItem("openCells")||"[]");

    if(cell.classList.contains("open")){
      cell.style.backgroundPosition=`${c*33.33}% ${r*33.33}%`;
      now.push(i);
      sparkle(cell);
    }else{
      now = now.filter(v=>v!==i);
    }
    localStorage.setItem("openCells", JSON.stringify(now));
  };

  grid.appendChild(cell);
});

/* ì´ë¦„ ì €ì¥ */
const nameInput=document.getElementById("username");
nameInput.value = localStorage.getItem("username") || "";
nameInput.addEventListener("input",()=>{
  localStorage.setItem("username", nameInput.value);
});

function sparkle(cell){
  for(let i=0;i<10;i++){
    const p=document.createElement("div");
    p.className="petal";
    p.style.setProperty("--x",(Math.random()*80-40)+"px");
    p.style.setProperty("--y",(Math.random()*80-40)+"px");
    p.style.left="50%";
    p.style.top="50%";
    cell.appendChild(p);
    setTimeout(()=>p.remove(),1000);
  }
}
</script>

<script>
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("/service-worker.js");
}
</script>

</body>
</html>
